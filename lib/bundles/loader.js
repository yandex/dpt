!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return c.default.parse(window.location.search.substr(1))}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(2),c=n(s),u=r(6),f=n(u),d=r(7),p=n(d);window.Platform=new f.default;var y=function(){function e(){o(this,e),this._config=this.initConfig(),this.raw=!1,this.onLoad=function(){},this.queryParams=i(),this.hideContentWhileLoading=!0,this.showProgressBar=!0}return l(e,[{key:"add",value:function(e){return console.warn("'Loader.add' is deprecated. Please use 'Loader.config' instead."),this.config(e)}},{key:"config",value:function(e){e=e||{};var t=this._config.imports.concat(e.imports||[]),r=a({},this._config.blocks,e.blocks||{});return this._config=a({},this._config,e,{imports:t,blocks:r}),this}},{key:"initConfig",value:function(){var e=i(),t=e.date,r=Platform.platform,n={},o=/\/blocks\/([^\/]+)\/([^\/]+)\/([^\/]+)\/[\w\d\-_\.]+.(md|ex)/,a=window.location.pathname;if(o.test(a)){var l=a.match(o),s=l[1]+"."+l[2];n[s]=l[3]}return Object.keys(e).forEach(function(t){"date"!==t&&"platform"!==t&&2===t.split(".").length&&(n[t]=e[t])}),{date:t,platform:r,blocks:n,imports:[]}}},{key:"retrievePaths",value:function(){var e=this;return new Promise(function(t,r){var n=new XMLHttpRequest,o=JSON.stringify({config:a({raw:e.raw},e._config)});n.open("POST","/api/loader/paths",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.addEventListener("load",function(){200===n.status?t(JSON.parse(n.responseText)):r(n.responseText)}),n.addEventListener("error",function(){r(n.responseText)}),n.send(o)})}},{key:"load",value:function(){var e=this;if(!this.raw&&(this.hideContentWhileLoading&&(document.body.style.visibility="hidden"),this.showProgressBar))var t=new p.default(0),r=setInterval(function(){return t.increment()},200);this.retrievePaths().then(function(n){if(window.requirejs.config({baseUrl:"/",waitSeconds:100,urlArgs:"platform="+Platform.platform,map:{"*":a({},n.paths,{beast:"/vendor/beast.js",css:"/.core/require-css.min.js"})}}),e.raw)e.onLoad();else{var o=function(){"undefined"!=typeof Beast&&Beast.init(),document.body.style.visibility="visible",e.onLoad()};window.requirejs(n.imports,function(){e.showProgressBar?(clearInterval(r),t.complete(o)):o()})}})}}]),e}(),h=new y;window.Loader=h,document.addEventListener("DOMContentLoaded",h.load.bind(h))},function(e,t){"use strict";var r=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){"use strict";var n=r(5),o=r(4),i=r(1);e.exports={formats:i,parse:o,stringify:n}},function(e,t){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=Object.prototype.hasOwnProperty,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();t.arrayToObject=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)"undefined"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,o,i){if(!o)return e;if("object"!==("undefined"==typeof o?"undefined":r(o))){if(Array.isArray(e))e.push(o);else{if("object"!==("undefined"==typeof e?"undefined":r(e)))return[e,o];e[o]=!0}return e}if("object"!==("undefined"==typeof e?"undefined":r(e)))return[e].concat(o);var a=e;return Array.isArray(e)&&!Array.isArray(o)&&(a=t.arrayToObject(e,i)),Array.isArray(e)&&Array.isArray(o)?(o.forEach(function(o,a){n.call(e,a)?e[a]&&"object"===r(e[a])?e[a]=t.merge(e[a],o,i):e.push(o):e[a]=o}),e):Object.keys(o).reduce(function(e,r){var n=o[r];return Object.prototype.hasOwnProperty.call(e,r)?e[r]=t.merge(e[r],n,i):e[r]=n,e},a)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",n=0;n<t.length;++n){var i=t.charCodeAt(n);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?r+=t.charAt(n):i<128?r+=o[i]:i<2048?r+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?r+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(n+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(n)),r+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return r},t.compact=function(e,n){if("object"!==("undefined"==typeof e?"undefined":r(e))||null===e)return e;var o=n||[],i=o.indexOf(e);if(i!==-1)return o[i];if(o.push(e),Array.isArray(e)){for(var a=[],l=0;l<e.length;++l)e[l]&&"object"===r(e[l])?a.push(t.compact(e[l],o)):"undefined"!=typeof e[l]&&a.push(e[l]);return a}var s=Object.keys(e);return s.forEach(function(r){e[r]=t.compact(e[r],o)}),e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t,r){"use strict";var n=r(3),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:n.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),i=0;i<n.length;++i){var a,l,s=n[i],c=s.indexOf("]=")===-1?s.indexOf("="):s.indexOf("]=")+1;c===-1?(a=t.decoder(s),l=t.strictNullHandling?null:""):(a=t.decoder(s.slice(0,c)),l=t.decoder(s.slice(c+1))),o.call(r,a)?r[a]=[].concat(r[a]).concat(l):r[a]=l}return r},l=function(e,t,r){if(!e.length)return t;var n,o=e.shift();if("[]"===o)n=[],n=n.concat(l(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i="["===o.charAt(0)&&"]"===o.charAt(o.length-1)?o.slice(1,-1):o,a=parseInt(i,10);!isNaN(a)&&o!==i&&String(a)===i&&a>=0&&r.parseArrays&&a<=r.arrayLimit?(n=[],n[a]=l(e,t,r)):n[i]=l(e,t,r)}return n},s=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/^([^[]*)/,a=/(\[[^[\]]*])/g,s=i.exec(n),c=[];if(s[1]){if(!r.plainObjects&&o.call(Object.prototype,s[1])&&!r.allowPrototypes)return;c.push(s[1])}for(var u=0;null!==(s=a.exec(n))&&u<r.depth;){if(u+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+n.slice(s.index)+"]"),l(c,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.delimiter="string"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:i.delimiter,r.depth="number"==typeof r.depth?r.depth:i.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:i.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder="function"==typeof r.decoder?r.decoder:i.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:i.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:i.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:i.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:i.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:i.strictNullHandling,""===e||null===e||"undefined"==typeof e)return r.plainObjects?Object.create(null):{};for(var o="string"==typeof e?a(e,r):e,l=r.plainObjects?Object.create(null):{},c=Object.keys(o),u=0;u<c.length;++u){var f=c[u],d=s(f,o[f],r);l=n.merge(l,d,r)}return n.compact(l)}},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=r(3),i=r(1),a={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:o.encode,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},c=function e(t,r,n,i,a,l,s,c,u,f,d){var p=t;if("function"==typeof s)p=s(r,p);else if(p instanceof Date)p=f(p);else if(null===p){if(i)return l?l(r):r;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||o.isBuffer(p))return l?[d(l(r))+"="+d(l(p))]:[d(r)+"="+d(String(p))];var y=[];if("undefined"==typeof p)return y;var h;if(Array.isArray(s))h=s;else{var m=Object.keys(p);h=c?m.sort(c):m}for(var b=0;b<h.length;++b){var v=h[b];a&&null===p[v]||(y=Array.isArray(p)?y.concat(e(p[v],n(r,v),n,i,a,l,s,c,u,f,d)):y.concat(e(p[v],r+(u?"."+v:"["+v+"]"),n,i,a,l,s,c,u,f,d)))}return y};e.exports=function(e,t){var r=e,o=t||{};if(null!==o.encoder&&void 0!==o.encoder&&"function"!=typeof o.encoder)throw new TypeError("Encoder has to be a function.");var l="undefined"==typeof o.delimiter?s.delimiter:o.delimiter,u="boolean"==typeof o.strictNullHandling?o.strictNullHandling:s.strictNullHandling,f="boolean"==typeof o.skipNulls?o.skipNulls:s.skipNulls,d="boolean"==typeof o.encode?o.encode:s.encode,p=d?"function"==typeof o.encoder?o.encoder:s.encoder:null,y="function"==typeof o.sort?o.sort:null,h="undefined"!=typeof o.allowDots&&o.allowDots,m="function"==typeof o.serializeDate?o.serializeDate:s.serializeDate;if("undefined"==typeof o.format)o.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,o.format))throw new TypeError("Unknown format option provided.");var b,v,g=i.formatters[o.format];"function"==typeof o.filter?(v=o.filter,r=v("",r)):Array.isArray(o.filter)&&(v=o.filter,b=v);var w=[];if("object"!==("undefined"==typeof r?"undefined":n(r))||null===r)return"";var j;j=o.arrayFormat in a?o.arrayFormat:"indices"in o?o.indices?"indices":"repeat":"indices";var O=a[j];b||(b=Object.keys(r)),y&&b.sort(y);for(var k=0;k<b.length;++k){var P=b[k];f&&null===r[P]||(w=w.concat(c(r[P],P,O,u,f,p,v,y,h,m,g)))}return w.join(l)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(2),l=n(a),s=function(){function e(){o(this,e);var t=l.default.parse(window.location.search.substr(1)),r=window.location.pathname,n=r.split("/"),i=n[n.length-1].split("."),a=t.platform||t.p,s=void 0;/\.html$/.test(r)&&i.length>2&&"bml"!==i[1]&&(s=i[1]);var c=void 0,u=window.navigator.userAgent;if(/iPhone/.test(u))c="mobile";else if(/iPad/.test(u))c="tablet";else if(/Android/.test(u)||window.screen.availWidth<=1024){var f=Math.min(window.screen.availHeight,window.screen.availWidth);c=f<768?"mobile":"tablet"}this.platform=a||s||c||"desktop"}return i(e,[{key:"is",value:function(e){return this.platform===e||this.platform===e+"-experimental"}},{key:"isDesktop",value:function(){return this.is("desktop")}},{key:"isMobile",value:function(){return this.is("mobile")}},{key:"isTablet",value:function(){return this.is("tablet")}},{key:"isExperimental",value:function(){return/-experimental$/.test(this.platform)}}]),e}();t.default=s,e.exports=t.default},function(e,t){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r(this,e),this.value=t,this.dom=document.createElement("div"),Object.assign(this.dom.style,{position:"absolute",left:0,top:0,height:"3px",backgroundColor:"#ccc",transition:"width 0.2s"}),document.body.appendChild(this.dom),this.dom.style.visibility="visible",this.render()}return n(e,[{key:"render",value:function(){this.dom.style.width=100*this.value+"%"}},{key:"setValue",value:function(e){this.value=e,this.render()}},{key:"increment",value:function(){var e=1-this.value;this.setValue(this.value+.1*e)}},{key:"complete",value:function(e){var t=this;this.dom.style.transition="width 0.01s",this.setValue(1),setTimeout(function(){t.dom.remove(),e()},30)}}]),e}();t.default=o,e.exports=t.default}]);